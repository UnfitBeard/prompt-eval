<div class="mx-auto max-w-[1200px] px-4 py-6 space-y-5">
  <!-- High-level inferred statistics -->
  <app-inferred-stats-panel
    [summary]="summary"
    [stats]="stats"
    [loading]="courseHistoryLoading && !summary"
  ></app-inferred-stats-panel>

  <!-- Course history + module-level progress -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
    <app-course-history-list
      [courses]="summary?.enrolled_courses || []"
      [staticDefinitions]="staticCourses"
      [selectedCourseId]="selectedCourseId"
      [loading]="courseHistoryLoading"
      [error]="courseHistoryError"
      (courseSelected)="onCourseSelected($event)"
    ></app-course-history-list>

    <app-module-progress-card
      [modules]="selectedCourseId ? modulesByCourse[selectedCourseId] || [] : []"
      [staticCourse]="selectedStaticCourse"
      [loading]="modulesLoading && !!selectedCourseId"
    ></app-module-progress-card>
  </div>

  <!-- Badges + certificates -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
    <app-badge-display
      [badges]="badges"
      [loading]="badgesLoading"
    ></app-badge-display>

    <app-certificate-viewer
      [certificates]="certificates"
      [loading]="certificatesLoading"
    ></app-certificate-viewer>
  </div>
</div>
